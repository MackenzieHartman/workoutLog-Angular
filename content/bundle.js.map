{"version":3,"sources":["app.js","define/define.js","auth/signin.js","auth/signup.js","auth/userlinks.js","history/history.js","logs/logs.js","authinterceptor.js","currentuser.js","define.service.js","logs.service.js","sessiontoken.js","users.service.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClBA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9BA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"bundle.js","sourcesContent":["(function() {\r\n\tvar app = angular.module('workoutlog', [\r\n\t\t'ui.router',\r\n\t\t'workoutlog.auth.signup'\r\n\t\t'workoutlog.auth.signin'\r\n\t\t'workoutlog.logs'\r\n\t\t'workoutlog.history'\r\n\t]);\r\n\r\n\tfunction config($urlRouterProvider) {\r\n\t\t$urlRouterProvider.otherwise('/signin');\r\n\t}\r\n\r\n\tconfig.$inject = [ '$urlRouterProvider' ];\r\n\tapp.config(config);\r\n\tapp.constant('API_BASE', '//localhost:3000/api');\r\n})();\r\n\r\n","","(function(){\r\n\tangular\r\n\t\t.module('workoutlog.auth.signin', ['ui.router'])\r\n\t\t.config(signinConfig);\r\n\r\n\t\tfuntion. signinConfig($stateProvider){\r\n\t\t\t$stateProvider\r\n\t\t\t\t.state('signin', {\r\n\t\t\t\t\turl: '/signin',\r\n\t\t\t\t\ttemplateUrl: '/components/auth/signin.html',\r\n\t\t\t\t\tcontroller: SignInController,\r\n\t\t\t\t\tcontrollerAs: 'ctrl',\r\n\t\t\t\t\tbindToController: this\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n\t\tsigninConfig.$inject = [ '$stateProvider'];\r\n\t\t// UsersService will be used throughout the application to gather or create data regarding a user.\r\n\t\tfunction SignInController($state, UsersService){\r\n\t\t\tvar vm = this;\r\n\t\t\t// Allows the controller to create a new user based upon the inputs from the signin.html.\r\n\t\t\tvm.user = {};\r\n\t\t\tvm.login = function(){\r\n\t\t\t\tUsersService.login(vm.user).then(function(response){\r\n\t\t\t\t\tconsole.log(response);\r\n\t\t\t\t\t$state.go('define');\r\n\t\t\t\t});\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tSignInController.$inject = ['$state', \"UsersService\"];\r\n})();\r\n\r\n","(function(){\r\n\tangular\r\n\t\t.module('workoutlog.auth.signup', ['ui,router'])\r\n\t\t.config(signupConfig);\r\n\t\t\r\n\t\t// signUpConfig establishes these items: defines this component as the state of signup and provides the url route templateUrl is the html the component will use\r\n\t\tfunction signupConfig($stateProvider){\r\n\t\t\t// $stateProvider is from ui-router and is the method through which url routing is handled.\r\n\t\t\t$stateProvider\r\n\t\t\t\t.state('signup', {\r\n\t\t\t\t\turl: '/signup',\r\n\t\t\t\t\t// templateUrl is the html the component will use\r\n\t\t\t\t\ttemplateUrl: '/components/auth/signup/html',\r\n\t\t\t\t\t// controller indicates which controller will dictate the behavior of this view \r\n\t\t\t\t\tcontroller: SignUpController,\r\n\t\t\t\t\t// controllerAs creates an alias so a developer doesn’t have to type SignUpController.<function orobject>\r\n\t\t\t\t\tcontrollerAs: 'ctrl',\r\n\t\t\t\t\t// bindToController binds the scope of the view to the scope of this controller and eliminates the need to use $scope.\r\n\t\t\t\t\tbindtoController: this\r\n\t\t\t\t});\r\n\t\t};\r\n\r\n\t\tsigupConfig.$inject = ['$stateProvider'];\r\n\t\t// SignUpController has $state and UsersService injected into it\r\n\t\tfunction SignUpController($state, UsersService){\r\n\t\t\t// var vm = this; is how the binding of the controller to the view is completed\r\n\t\t\tvar vm = this;\r\n\t\t\t// vm.user = {}; establishes an object to build the username and password inside.\r\n\t\t\tvm.user = {};\r\n\t\t\t// vm.message = “Sign up for an account!” is an example of expressions and how vm and this scope work together.\r\n\t\t\tvm.message = \"sign up for an account!\"\r\n\t\t\tvm.submit = function(){\r\n\t\t\t\t// ng-model and ng-submit create the vm.user object that UserService.create uses to sign a new user up to our application.\r\n\t\t\t\tUsersService.create(vm.user).then(function(response){\r\n\t\t\t\t\t// console.log(response);\r\n\t\t\t\t\t// $state.go(‘define’) is how ui-route changes from state (url) to other states.\r\n\t\t\t\t\t$state.go('define');\r\n\t\t\t\t});\r\n\t\t\t};\r\n\t\t}\r\n\t\t// The .then is how the SignUpController handles the resolved promise and then routes the app to the define feature of the WorkoutLog.\r\n\t\tSignUpController.$inject = ['$state', 'UsersService'];\r\n})();\r\n\r\n\r\n//There are several concepts implemented in this controller and the other controllers throughout this app.  \r\n//First, in other Angular apps built in this course the configuration (config) file is found in a single file.  \r\n//This way keeps the components together.  It is also important to note that the config and controller for each \r\n//feature will use the .$inject directive from Angular to inject dependencies.","(function(){\r\n\tangular.module('workoutlog')\r\n\t.directive('userlinks'\r\n\t\tfunction(){\r\n\t\t\tUserLinksController.$inject = ['$state', 'CurrentUser', 'SessionToken'];\r\n\t\t\tfunction UserLinksController($state, CurrentUser, SessionToken){\r\n\t\t\t\tvar vm= this;\r\n\t\t\t\tvm.user = function(){\r\n\t\t\t\t\treturn CurrentUser.get();\r\n\t\t\t\t};\t\r\n\r\n\t\t\t\tvm.signedIn = function(){\r\n\t\t\t\t\treturn !!(vm.user().id);\r\n\t\t\t\t};\r\n\r\n\t\t\t\tvm.logout = function(){\r\n\t\t\t\t\tCurrentUser.clear();\r\n\t\t\t\t\tSessionToken.clear();\r\n\t\t\t\t\t$state.go('signin');\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\treturn{\r\n\t\t\t\tscope: {},\r\n\t\t\t\tcontroller: UserLinksController,\r\n\t\t\t\tcontrollerAs: 'ctrl',\r\n\t\t\t\tbindToController: true,\r\n\t\t\t\ttemplateUrl: '/components/auth/userlinks/html'\r\n\t\t\t};\r\n\t\t});\r\n})();\r\n\r\n\t\t\r\n","(function(){\r\n\tangular.module('workoutlog.history',[\r\n\t\t'ui.router'\r\n\t])\r\n\t.config(historyConfig);\r\n\thistoryConfig.$inject = ['$stateProvider'];\r\n\tfunction historyConfig($stateProvider){\r\n\r\n\t\t$stateProvider\r\n\t\t\t.state('history', {\r\n\t\t\t\turl: '/history',\r\n\t\t\t\ttemplateUrl: '/components/history/history.html',\r\n\t\t\t\tcontroller: HistoryController,\r\n\t\t\t\tcontrollerAs: 'ctrl',\r\n\t\t\t\tbindToController: this,\r\n\t\t\t\tresolve: {\r\n\t\t\t\t\tgetUserLogs: [\r\n\t\t\t\t\t\t'LogsService',\r\n\t\t\t\t\t\tfunction(LogsService){\r\n\t\t\t\t\t\t\treturn LogsService.fetch();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t}\r\n\t\r\n\tHistoryController.$inject = ['$state', 'LogsService'];\r\n\tfuntion HistoryController($state, LogsService){\r\n\t\tvar vm= this;\r\n\t\tvm.history = LogsService.getLogs();\r\n\r\n\t\tvm.delete = function(item){\r\n\t\t\tLogsService.deleteLogs(item);\r\n\t\t};\r\n\r\n\t\tvm.updateLog = (function(item){\r\n\t\t\t$state.go('logs/update', {'id' : item.id});;\r\n\t\t\t};\r\n\t}\r\n})();\r\n\r\n\r\n// Notice how LogsService is injected and then implemented in this controller.  The history\r\n// component is used to present the collection of logs.  Look inside vm.updateLog, $state.go has the\r\n// route as the first argument but the second argument is an object with an id property.  This is how logs.js ‘knows” which log to get so it can be updated.\r\n","(function(){\r\n\tangular.module('workoutlog.logs',[\r\n\t\t'ui.routConfig'\r\n\t])\r\n\t.config(logsConfig);\r\n\r\n\tlogsConfig.$inject = ['$stateProvider'];\r\n\tfunction logsConfig($stateProvider){\r\n\r\n\t\t$stateProvider\r\n\t\t\t.state('logs', {\r\n\t\t\t\turl: '/logs',\r\n\t\t\t\ttemplateUrl: '/components/logs/logs.html',\r\n\t\t\t\tcontroller: LogsController,\r\n\t\t\t\tcontrollerAs: 'ctrl',\r\n\t\t\t\tbindToController: this,\r\n\t\t\t\tresolve: {\r\n\t\t\t\t\tgetUserDefinitions: [\r\n\t\t\t\t\t\t'DefineService',\r\n\t\t\t\t\t\tfunction(DefineService){\r\n\t\t\t\t\t\t\treturn DefineService.fetch();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.state('logs/update',{\r\n\t\t\t\turl: '/logs/:id',\r\n\t\t\t\ttemplateUrl: '/components/logs/log-update.html',\r\n\t\t\t\tcontroller: LogsController,\r\n\t\t\t\tcontrollerAs: 'ctrl',\r\n\t\t\t\tbindToController: this,\r\n\t\t\t\tresolve: {\r\n\t\t\t\t\tgetSingleLog: function($stateParams, LogsService){\r\n\t\t\t\t\t\treturn LogsService.fetchOne($stateParams.id);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tgetUserDefinitions: function(DefineService){\r\n\t\t\t\t\t\treturn DefineService.fetch();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t}\r\n\r\n\tLogsController.$inject = ['$state', 'DefineService', 'LogsService' ];\r\n\tfuntion LogsController($state, DefineService, LogsService){\r\n\t\tvar vm= this;\r\n\t\tvm.saved = false;\r\n\t\tvm.log = {};\r\n\t\tvm.userDefinitions = DefineService.getUserDefinitions();\r\n\t\tvm.updateLog = LogsService.getLog();\r\n\t\tvm.save = function(){\r\n\t\t\tLogsService.save(vm.log)\r\n\t\t\t\t.then(function(){\r\n\t\t\t\t\tvm.saved = true;\r\n\t\t\t\t\t$state.go('history');\r\n\t\t\t\t});\r\n\t\t};\r\n\r\n\t\t// Create an update funtion here\r\n\t\tvm.updateSingleLog = function(){\r\n\t\t\tvar logtoUpdate = {\r\n\t\t\t\tid: vm.updateLog.id,\r\n\t\t\t\tdesc: vm.updateLog.description,\r\n\t\t\t\tresult: vm.updateLog.result,\r\n\t\t\t\tdef: vm.updateLog.def\r\n\t\t\t}\r\n\t\t\tLogsService.updateLog(logtoUpdate)\r\n\t\t\t\t.then(function(){\r\n\t\t\t\t\t$state.go('history');\r\n\t\t\t\t});\r\n\t\t};\r\n\t}\r\n})();\r\n\r\n// New concepts in this file:\r\n// $stateParams.id allows the application to pass the url and use that as a way to identify an individual \r\n// workout.  Notice in the .state(‘logs/update’) the ‘/:id’.  This is the variable that is passed to\r\n// $stateParams.id.\r\n\r\n// Notice on the .state(‘logs/update’) that there are two functions that occur on the resolve.  This\r\n// allows the route to have access to the data of the log being edited.  Also note, that the resolve is\r\n// getting all user definitions of a workout\r\n","(function(){\r\n\tangular.module('workoutlog')\r\n\t\t// SessionToken and API_BASE are dependencies for this factory service. API_BASE is established in app.js and sessiontoken.js will be built shortly.\r\n\t\t.factory('AuthInterceptor', ['SessionToken', 'API_BASE',\r\n\t\t\tfunction(SessionToken, API_BASE){\r\n\t\t\t\treturn{\r\n\t\t\t\t\trequest: function(config){\r\n\t\t\t\t\t\tvar token = SessionToken.get();\r\n\t\t\t\t\t\t// if statement above is essentially checking to see if there is a token and a url of API_BASE : Both of these are set in other files.\r\n\t\t\t\t\t\tif (token && confog.url.indexOf(API_BASE) > -1) {\r\n\t\t\t\t\t\t\t//this is where the token that is generated on successful account creations(signup) and logging in (signin) are attached to each ajax request.\r\n\t\t\t\t\t\t\tconfig.headers['Authorization'] = token;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn config;\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t}]);\r\n\tangular.module('workoutlog')\t\r\n\t\t// This section adds an interceptor that is configured for this app.  $httpProvider has an array thatexecutes each interceptor that the Angular framework runs and also what a developer has custom built for specific applications.\r\n\t\t// Essentially consider the $httpProvider interceptors as methods to filter http requests.\r\n\t\t.config(['$httpProvider', function($httpProvider){\r\n\t\t\treturn $httpProvider.interceptors.push('AuthInterceptor');\r\n\t\t}]);\r\n})();\r\n\r\n\r\n// Generating Sessions\r\n\r\n// The API is generating session tokens by implementing JWT (JSON Web Tokens).  The next file will create a service that takes the generated token and does three tasks.\r\n// Sets the sessiontoken in localstorage (signup / signin)\r\n// Gets the sessiontoken from localstorage (check authentication)\r\n// Clears the sessiontoken from localstore (signout)\r\n","(function(){\r\n\tangular.module('workoutlog')\r\n\t\t.service('CurrentUser', [ '$window', function($window){\r\n\t\t\tfunction CurrentUser(){\r\n\t\t\t\tvar currUser = $window.localStorage.getItem('currentUser');\r\n\t\t\t\t// line of code is checking if there is a currentUser\r\n\t\t\t\tif (currUser && currUser !== \"undefined\"){\r\n\t\t\t\t\t// If the currUser is undefined then set the currentUser\r\n\t\t\t\t\tthis.currentUser = JSON.parse($window.localStorage.getItem('currentUser'));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tCurrentUser.prototype.set = function(user){\r\n\t\t\t\tthis.currentUser = user;\r\n\t\t\t\t$window.localStorage.setItem('currentUser', JSON.stringify(user));\r\n\t\t\t};\r\n\t\t\tCurrentUser.prototype.get = function(){\r\n\t\t\t\treturn this.currentUser || {};\r\n\t\t\t};\r\n\t\t\tCurrentUser.prototype.clear = function(){\r\n\t\t\t\tthis.currentUser = undefined;\r\n\t\t\t\t$window.localStorage.removeItem('currentUser');\r\n\t\t\t};\r\n\t\t\tCurrentUser.prototype.isSignedIn = function(){\r\n\t\t\t\t// line of code is checking if there is a currentUser\r\n\t\t\t\t// The double !! ensures that isSignedIn flips the boolean correctly\r\n\t\t\t\t// An exercise that will help with the !! is to think through what occurs when a user signs in and how the use of a boolean could indicate that in code.\r\n\t\t\t\treturn !!this.get().id;\r\n\t\t\t};\r\n\t\t\treturn new CurrentUser();\r\n\t\t}]);\r\n})();","","(function(){\r\n\tangular.module('workoutlog')\r\n\t\t.service('LogsService', LogsService);\r\n\r\n\t\tLogsService.$inject = ['$http,' 'API_BASE'];\r\n\t\tfunction LogsService($http, API_BASE, DefineService){\r\n\t\t\tvar logsService = this;\r\n\t\t\tlogsService.workouts = [];\r\n\t\t\tlogsService.individualLog = {};\r\n\t\t\t// Saves the log\r\n\t\t\tlogsService.save = function(log){\r\n\t\t\t\treturn $http.post(API_BASE + 'log',{\r\n\t\t\t\t\tlog: log\r\n\t\t\t\t})\r\n\t\t\t\t.then\r\n\t\t\t\tfunction(repsonse){\r\n\t\t\t\t\tlogsService.workouts.push(repsonse);\r\n\t\t\t\t});\r\n\t\t\t};\r\n\r\n\t\t\tlogsService.fetch = function(log){\r\n\t\t\t\treturn $http.get(API_BASE + 'log')\r\n\t\t\t\t\t.then\r\n\t\t\t\t\t(function(repsonse){\r\n\t\t\t\t\t\tlogsService.workouts = response.data;\r\n\t\t\t\t\t});\r\n\t\t\t};\r\n\r\n\t\t\tlogsService.getLogs = function(){\r\n\t\t\t\treturn logsService.workouts;\r\n\t\t\t};\r\n\r\n\r\n\t\t\tlogsService.deleteLogs = function(log){\r\n\t\t\t\tvar logIndex = logsService.workouts.indecOf(log);\r\n\t\t\t\tlogsService.workouts.splice(logIndex, 1);\r\n\t\t\t\tvar deleteData = {log: log};\r\n\t\t\t\treturn $http({\r\n\t\t\t\t\tmethod: 'DELETE',\r\n\t\t\t\t\turl: API_BASE + \"log\",\r\n\t\t\t\t\tdata: JSON.stringify(deleteData),\r\n\t\t\t\t\theaders: {\"Content-Type\": \"application/json\"}\r\n\t\t\t\t});\r\n\t\t\t};\r\n\r\n\t\t\tlogsService.fetchOne = function(log){\r\n\t\t\t\t// console.log(log);\r\n\t\t\t\treturn $http.get(API_BASE + 'log/' + log)\r\n\t\t\t\t\t.then(function(repsonse){\r\n\t\t\t\t\t\tlogsService.individualLog = response.data;\r\n\t\t\t\t\t});\r\n\t\t\t};\r\n\r\n\t\t\tlogsService.getLog = function(){\r\n\t\t\t\treturn logsService.individualLog;\r\n\t\t\t};\r\n\r\n\t\t\tlogsService.updateLog = function(logToUpdate){\r\n\t\t\t\treturn $http.put(API_BASE + 'log', {log: logToUpdate});\r\n\t\t\t}\r\n\t\t}\r\n})();\r\n\r\n// There are several concepts to unpack in this file.  However, once understood, this is a conventional\r\n// way to construct services.  At the top of the file, there is an empty array and an empty object. \r\n// Both of these are used to expose data to the rest of the application.  getLogs and getLog return\r\n// these data types so they can be used in multiple controllers.  This service implements all HTTP\r\n// verbs to implement a full CRUD application.\r\n","(function(){\r\n\tangular.module('workoutlog')\r\n\t\t.service('SessionToken', ['$window', function($window){\r\n\t\t\t// Declares and defines SessionToken()\r\n\t\t\tfunction SessionToken(){\r\n\t\t\t\tthis.sessionToken = $window.localStorage.getItem('sessionToken');\r\n\t\t\t}\r\n \t\t\t// .prototype to attach the functions of .set / .get and .clear to the prototype chain having  memory enhancements and follow conventional design patterns.\r\n\t\t\tSessionToken.prototype.set = function(token){\r\n\t\t\t\tthis.sessionToken = token;\r\n\t\t\t\t$window.localStorage.setItem('sessionToken', token);\r\n\t\t\t};\r\n \t\t\t// .prototype to attach the functions of .set / .get and .clear to the prototype chain having memory enhancements and follow conventional design patterns.\r\n\t\t\tSessionToken.prototype.get = function(){\r\n\t\t\t\treturn this.sessionToken;\r\n\t\t\t};\r\n \t\t\t// .prototype to attach the functions of .set / .get and .clear to the prototype chain having  memory enhancements and follow conventional design patterns.\r\n\t\t\tSessionToken.prototype.get = function(){\r\n\t\t\t\tthis.sessionToken = undefined;\r\n\t\t\t\t$window.localStorage.removeItem('sessionToken');\r\n\t\t\t};\r\n\t\t}]);\r\n})();\r\n\r\n\r\n// Documentation regarding $window can be found here: https://docs.angularjs.org/api/ng/service/$window\r\n\r\n// Documentation regarding localStorage can be found here: https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage\r\n\r\n// Remember JavaScript has a window object but it is a global variable. This makes testing and maintenance difficult.  $window is Angular’s window object and helps increase testing and maintenance by controlling the scope.\r\n\r\n// Establishing a Current User\r\n// Currentuser.js implements the same design pattern.  In addition, it implements some hard to understand logic. \r\n\r\n","// This file will handle the http request to create and / or signin a user.  \r\n// When building out this file, notice how the design pattern of Dependency Injection is implemented.  \r\n// For users.service to perform the necessary functions, it needs $http, API_BASE, SessionToken and CurrentUser.  \r\n// An important concept to remember of software development at this level is Separation of Concerns (SOC).  Dependency Injection (DI) \r\n// follows this pattern by created separate services to handle specific functionality the application requires.  Then each of these services are combined to build the create and login feature of this app. \r\n// Remember, ease code maintenance is increased as technical debt is minimized.  SOC and DI accomplish this by having one file that can be altered and then implemented across the application.\r\n\r\n(function(){\r\n\tangular.module('workoutlog')\r\n\t\t.service('UsersService', [\r\n\t\t\t'$http', 'API_BASE', 'SessionToken','CurrentUser',\r\n\t\t\tfunction($http, API_BASE, SessionToken, CurrentUser){\r\n\t\t\t\tfunction UsersService(){\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tUsersService.prototype.create = function(user){\r\n\t\t\t\tvar userPromise = $http.post(API_BASE + 'user', {\r\n\t\t\t\t\tuser: user\r\n\t\t\t\t});\r\n\r\n\t\t\t\tuserPromise.then(function(response){\r\n\t\t\t\t\tSessionToken.set(response.data.sesssionToken);\r\n\t\t\t\t\tCurrentUser.set(response.data.user);\r\n\t\t\t\t});\r\n\t\t\t\treturn userPromise;\r\n\t\t\t};\r\n\r\n\t\t\tUsersService.prototype.login = function(user){\r\n\t\t\t\tvar loginPromise = $http.post(API_BASE + 'login',{\r\n\t\t\t\t\tuser: user\r\n\t\t\t\t});\r\n\r\n\t\t\t\tloginPromise.then(function(repsonse){\r\n\r\n\r\n\t\t\t\t\tSessionToken.set(repsonse.data.sessionToken);\r\n\t\t\t\t\tCurrentUser.set(repsonse.data.user);\r\n\t\t\t\t});\r\n\t\t\t\treturn loginPromise;\r\n\t\t\t};\r\n\t\t\treturn new UsersService();\r\n\t\t}]);\r\n})();"]}